
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Democratization-Autocratization Spectrum</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 50px; }
        .main-title {
            background: linear-gradient(90deg, #8b0000 0%, #4a0e4e 50%, #1e3a8a 100%);
            color: white; padding: 20px; font-size: 32px; font-weight: 700;
            border-radius: 8px; margin-bottom: 30px; letter-spacing: 2px;
        }
        .status-display {
            background: rgba(255, 255, 255, 0.1); color: #fff; padding: 15px;
            border-radius: 8px; font-size: 24px; font-weight: bold; margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2); text-transform: uppercase;
            display: flex; justify-content: center; gap: 20px;
        }
        .percentage-badge { color: #eab308; }
        .spectrum-bar {
            margin: 20px auto 20px; max-width: 1200px;
            background: linear-gradient(90deg, #8b0000 0%, #c41e3a 20%, #999 50%, #6366f1 80%, #1e3a8a 100%);
            height: 40px; border-radius: 20px; display: flex; align-items: center;
            justify-content: space-between; padding: 0 20px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
        .spectrum-label { color: white; font-size: 16px; font-weight: 700; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); }
        .slider-container { margin: 20px auto 40px; max-width: 1200px; padding: 0 20px; }
        input[type="range"] { width: 100%; height: 12px; border-radius: 6px; background: transparent; outline: none; -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 32px; height: 32px; border-radius: 50%; background: white; cursor: pointer; border: 4px solid #1e3a8a; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); }
        input[type="range"]::-moz-range-thumb { width: 32px; height: 32px; border-radius: 50%; background: white; cursor: pointer; border: 4px solid #1e3a8a; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); }
        
        .regime-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 40px; }
        .regime-card { border-radius: 12px; padding: 20px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3); transition: background 0.2s ease; min-height: 400px; display: flex; flex-direction: column; }
        .regime-title { color: white; font-size: 18px; font-weight: 700; margin-bottom: 16px; text-align: center; border-bottom: 3px solid rgba(255, 255, 255, 0.3); padding-bottom: 10px; text-transform: uppercase; }
        .characteristics { display: flex; flex-direction: column; gap: 10px; flex: 1; }
        .characteristic { background: rgba(255, 255, 255, 0.95); padding: 12px 14px; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; color: #1f2937; font-size: 14px; line-height: 1.4; border: 2px solid transparent; }
        .characteristic.removed { background: rgba(255, 255, 255, 0.25); color: rgba(255, 255, 255, 0.8); text-decoration: line-through; opacity: 0.7; }
        
        .action-bar { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-bottom: 20px; }
        .bookmark-list { display: flex; justify-content: center; gap: 10px; margin-bottom: 40px; flex-wrap: wrap; }
        .btn { border: none; padding: 10px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; color: white; }
        .reset-button { background: #1e3a8a; }
        .bookmark-button { background: #eab308; color: #1a1a2e; }
        .load-btn { background: #6366f1; }
        .delete-btn { background: #ef4444; margin-left: 5px; padding: 5px 10px; font-size: 10px; }

        .footer-citations { margin-top: 60px; padding-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.2); color: rgba(255, 255, 255, 0.7); text-align: center; font-size: 14px; line-height: 1.6; }
        .source-line { font-style: italic; margin-bottom: 8px; }

        @media (max-width: 1100px) { .regime-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 600px) { .regime-grid { grid-template-columns: 1fr; } .status-display { flex-direction: column; align-items: center; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="main-title">DEMOCRATIZATION ← → AUTOCRATIZATION</h1>
            <div id="statusDisplay" class="status-display">
                <span>Status: <span id="regimeName">Liberal Democracy</span></span>
                <span class="percentage-badge">Index: <span id="percentVal">100</span>%</span>
            </div>
            <div class="spectrum-bar">
                <span class="spectrum-label">AUTOCRATIZATION</span>
                <span class="spectrum-label">DEMOCRATIZATION</span>
            </div>
            <div class="slider-container">
                <input type="range" id="regimeSlider" min="0" max="100" value="100" step="1">
            </div>
        </div>

        <div class="regime-grid">
            <div class="regime-card" data-regime="0">
                <h2 class="regime-title">Closed Autocracy</h2>
                <div class="characteristics">
                    <div class="characteristic" data-feature="ca1">No multiparty elections for the executive</div>
                    <div class="characteristic" data-feature="ca2">Absence of fundamental democratic components</div>
                    <div class="characteristic" data-feature="ca3">Absence of freedom of association</div>
                    <div class="characteristic" data-feature="ca4">Absence of free and fair elections</div>
                </div>
            </div>
            <div class="regime-card" data-regime="1">
                <h2 class="regime-title">Electoral Autocracy</h2>
                <div class="characteristics">
                    <div class="characteristic" data-feature="ea1">Multiparty elections for the executive exist</div>
                    <div class="characteristic" data-feature="ea2">Insufficient freedom of expression</div>
                    <div class="characteristic" data-feature="ea3">Insufficient freedom of association</div>
                    <div class="characteristic" data-feature="ea4">Elections are not free/fair</div>
                </div>
            </div>
            <div class="regime-card" data-regime="2">
                <h2 class="regime-title">Electoral Democracy</h2>
                <div class="characteristics">
                    <div class="characteristic" data-feature="ed1">Multiparty elections are free and fair</div>
                    <div class="characteristic" data-feature="ed2">Satisfactory degrees of suffrage</div>
                    <div class="characteristic" data-feature="ed3">Satisfactory freedom of expression</div>
                    <div class="characteristic" data-feature="ed4">Satisfactory freedom of association</div>
                </div>
            </div>
            <div class="regime-card" data-regime="3">
                <h2 class="regime-title">Liberal Democracy</h2>
                <div class="characteristics">
                    <div class="characteristic" data-feature="ld1">Requirements of Electoral Democracy met</div>
                    <div class="characteristic" data-feature="ld2">Judicial constraints on executive</div>
                    <div class="characteristic" data-feature="ld3">Legislative constraints on executive</div>
                    <div class="characteristic" data-feature="ld4">Protection of civil liberties</div>
                    <div class="characteristic" data-feature="ld5">Equality before the law</div>
                </div>
            </div>
        </div>

        <div class="action-bar">
            <button class="btn reset-button" onclick="resetAll()">Reset All</button>
            <button class="btn bookmark-button" onclick="saveBookmark()">Bookmark State</button>
        </div>
        <div id="bookmarkList" class="bookmark-list"></div>

        <div class="footer-citations">
            <p class="source-line">Developed from Nord et al., 2025, p. 13</p>
            <p>Nord, M., Altman, D., Angiolillo, F., Fernandes, T., Good God, A. and Lindberg, S.I. (2025) Democracy Report 2025: 25 Years of Autocratization – Democracy Trumped? Gothenburg: V-Dem Institute, University of Gothenburg (Democracy Report No. 9)</p>
        </div>
    </div>

    <script>
        const slider = document.getElementById('regimeSlider');
        const regimeCards = document.querySelectorAll('.regime-card');
        const regimeNameText = document.getElementById('regimeName');
        const percentValText = document.getElementById('percentVal');
        const bookmarkList = document.getElementById('bookmarkList');
        
        let removedFeatures = { 0: new Set(), 1: new Set(), 2: new Set(), 3: new Set() };
        const totalCounts = { 0: 4, 1: 4, 2: 4, 3: 5 };

        const thresholds = {
            3: { min: 75, max: 100, name: "Liberal Democracy" },
            2: { min: 50, max: 74, name: "Electoral Democracy" },
            1: { min: 25, max: 49, name: "Electoral Autocracy" },
            0: { min: 0, max: 24, name: "Closed Autocracy" }
        };

        slider.addEventListener('input', function() {
            syncUI(parseInt(this.value));
        });

        function syncUI(val) {
            percentValText.textContent = val;

            regimeCards.forEach(card => {
                const regime = parseInt(card.dataset.regime);
                const t = thresholds[regime];
                const chars = card.querySelectorAll('.characteristic');
                
                if (val >= t.min && val <= t.max) regimeNameText.textContent = t.name;

                // Threshold Recovery: 
                // If slider reaches the far right of this category, clear its strikes
                if (val === t.max) {
                    removedFeatures[regime].clear();
                }

                // Foundational Check
                let leftFoundationBroken = false;
                for (let i = 0; i < regime; i++) {
                    if (removedFeatures[i].size > 0 || val < thresholds[i].min) { 
                        leftFoundationBroken = true; 
                        break; 
                    }
                }

                chars.forEach(char => {
                    const feat = char.dataset.feature;
                    if (removedFeatures[regime].has(feat) || val < t.min || leftFoundationBroken) {
                        char.classList.add('removed');
                    } else {
                        char.classList.remove('removed');
                    }
                });

                let bgColor;
                if (val < t.min || leftFoundationBroken) {
                    bgColor = '#ef4444'; 
                } else if (val > t.max) {
                    bgColor = '#22c55e'; 
                } else {
                    const rangeFactor = (val - t.min) / (t.max - t.min);
                    bgColor = interpolate(rangeFactor);
                }
                card.style.background = bgColor;
            });
        }

        function interpolate(factor) {
            const r = Math.round(239 + (34 - 239) * factor);
            const g = Math.round(68 + (197 - 68) * factor);
            const b = Math.round(68 + (94 - 68) * factor);
            return `rgb(${r},${g},${b})`;
        }

        document.querySelectorAll('.characteristic').forEach(char => {
            char.addEventListener('click', function() {
                const regime = parseInt(this.closest('.regime-card').dataset.regime);
                const feat = char.dataset.feature;
                const currentVal = parseInt(slider.value);

                let foundationBroken = false;
                for (let i = 0; i < regime; i++) {
                    if (removedFeatures[i].size > 0 || currentVal < thresholds[i].min) { 
                        foundationBroken = true; 
                        break; 
                    }
                }
                if (foundationBroken) return;

                if (removedFeatures[regime].has(feat)) removedFeatures[regime].delete(feat);
                else removedFeatures[regime].add(feat);

                let totalScore = 100;
                for (let r = 0; r <= 3; r++) {
                    const weight = 25 / totalCounts[r];
                    totalScore -= (removedFeatures[r].size * weight);
                }
                slider.value = Math.max(0, Math.round(totalScore));
                syncUI(parseInt(slider.value));
            });
        });

        function saveBookmark() {
            const name = prompt("Name this bookmark:");
            if (!name) return;
            const state = { name, removed: {}, sliderVal: slider.value };
            for (let r in removedFeatures) state.removed[r] = Array.from(removedFeatures[r]);
            let bookmarks = JSON.parse(localStorage.getItem('vdemBookmarks') || '[]');
            bookmarks.push(state);
            localStorage.setItem('vdemBookmarks', JSON.stringify(bookmarks));
            renderBookmarks();
        }

        function renderBookmarks() {
            const bookmarks = JSON.parse(localStorage.getItem('vdemBookmarks') || '[]');
            bookmarkList.innerHTML = '';
            bookmarks.forEach((b, index) => {
                const div = document.createElement('div');
                div.innerHTML = `<button class="btn load-btn" onclick="loadBookmark(${index})">${b.name}</button><button class="btn delete-btn" onclick="deleteBookmark(${index})">X</button>`;
                bookmarkList.appendChild(div);
            });
        }

        window.loadBookmark = function(index) {
            const bookmarks = JSON.parse(localStorage.getItem('vdemBookmarks') || '[]');
            const state = bookmarks[index];
            for (let r in state.removed) removedFeatures[r] = new Set(state.removed[r]);
            slider.value = state.sliderVal;
            syncUI(parseInt(slider.value));
        };

        window.deleteBookmark = function(index) {
            let bookmarks = JSON.parse(localStorage.getItem('vdemBookmarks') || '[]');
            bookmarks.splice(index, 1);
            localStorage.setItem('vdemBookmarks', JSON.stringify(bookmarks));
            renderBookmarks();
        };

        function resetAll() {
            for (let r in removedFeatures) removedFeatures[r].clear();
            slider.value = 100;
            syncUI(100);
        }

        renderBookmarks();
        syncUI(100);
    </script>
</body>
</html>
